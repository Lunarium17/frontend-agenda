import{_,u as k,r as i,o as w,c as r,a as t,b as h,d as p,t as m,w as V,e as C,f as P,g as v,v as f,h as b,i as n}from"./index-B4Dz6Cr1.js";const N={class:"contenedor-centrado"},z={class:"card-estilo",style:{"max-width":"400px",width:"90%"}},B={key:0,class:"texto-centro"},D={key:1},M={key:0},S={class:"dato-item"},$={class:"dato-item"},A={__name:"PerfilView",setup(E){const d=k(),l=i({}),c=i(!0),u=i(!1),a=i({nombre_de_usuario:"",password:""}),g=async()=>{try{const o=await b.get("https://agenda-contactos.infinityfreeapp.com/api/auth/perfil.php",{headers:{Authorization:`Bearer ${d.token}`}});l.value=o.data,a.value.nombre_de_usuario=l.value.nombre_de_usuario}catch(o){console.error(o)}finally{c.value=!1}},y=async()=>{try{await b.put("https://agenda-contactos.infinityfreeapp.com/api/auth/editar.php",a.value,{headers:{Authorization:`Bearer ${d.token}`}}),alert("Perfil actualizado. Inicia sesiÃ³n de nuevo."),d.logout()}catch(o){alert("Error: "+(o.response?.data?.message||o.message))}};return w(()=>{g()}),(o,e)=>{const x=C("router-link");return n(),r("div",N,[t("div",z,[e[12]||(e[12]=t("h2",{class:"texto-centro"},"ðŸ‘¤ Mi Perfil",-1)),c.value?(n(),r("div",B,"Cargando datos...")):(n(),r("div",D,[u.value?(n(),r("form",{key:1,onSubmit:P(y,["prevent"])},[e[9]||(e[9]=t("label",null,"Nuevo Nombre:",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.nombre_de_usuario=s),required:""},null,512),[[f,a.value.nombre_de_usuario]]),e[10]||(e[10]=t("label",null,"Nueva ContraseÃ±a (Opcional):",-1)),v(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.password=s),placeholder:"Dejar en blanco si no cambia"},null,512),[[f,a.value.password]]),e[11]||(e[11]=t("button",{type:"submit",class:"btn-guardar ancho-completo mt-2",style:{padding:"10px"}},"ðŸ’¾ Guardar",-1)),t("button",{type:"button",onClick:e[3]||(e[3]=s=>u.value=!1),class:"btn-cancelar ancho-completo mt-2",style:{padding:"10px"}},"Cancelar")],32)):(n(),r("div",M,[t("div",S,[e[4]||(e[4]=t("strong",null,"Usuario:",-1)),e[5]||(e[5]=p()),t("span",null,m(l.value.nombre_de_usuario),1)]),t("div",$,[e[6]||(e[6]=t("strong",null,"Desde:",-1)),e[7]||(e[7]=p()),t("span",null,m(l.value.fecha_registro),1)]),t("button",{onClick:e[0]||(e[0]=s=>u.value=!0),class:"btn-actualizar ancho-completo mt-2",style:{"background-color":"#f1c40f",padding:"10px"}},"âœï¸ Editar Perfil"),h(x,{to:"/agenda",class:"btn-guardar ancho-completo mt-2",style:{display:"block","text-align":"center","text-decoration":"none",padding:"10px","background-color":"var(--color-primario)"}},{default:V(()=>[...e[8]||(e[8]=[p("â¬… Volver",-1)])]),_:1})]))]))])])}}},U=_(A,[["__scopeId","data-v-25d1736c"]]);export{U as default};
